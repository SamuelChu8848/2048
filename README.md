# 2048-本科阶段课程小设计
（大二时期C语言课程设计）就是常见的2048小游戏
date: 2017.11

**update 2022.07.12**
* 整体流程 
    * 游戏界面大小 4 * 4个单元格，使用4 * 4数组控制显示。使用的是EGE图形库（有点老）。
    * 数组元素为0，显示空白图片，其余显示对应数字图片，如2显示2图片。
    * 在游戏中，根据按键，对数组元素进行对应方向的合并。然后再移动。
* 首先进行初始化。
    * 设置随机位置出现一个2。
    * 初始化空格子为15
    * 初始化图形界面。初始化一个图片对象，将“菜单”界面背景图传入并显示。
* 读取之前的最高分
    * 从记录最高分的name.txt中读取，然后游戏中显示在界面顶部上。
    * 然后进入游戏，通过is_run()控制结束，通过延时delay_fps控制帧率。[代码讲解](https://blog.csdn.net/qq_39151563/article/details/104342584)
* 游戏中ing
    * 通过play函数获取用户操作，更新数组元素返回用户得分。
        * 在play函数中，首先获取用户操作，调用对应的函数合并可以合并的元素，然后移动到对应的位置。
        * 以up为例，对遍历每一列，对于每一列从上(第0行)到下(第3行)寻找下方最近的一个数是不是相等，如果相等，把下面的置为0，上面的乘2。不相等则退出对本方块合并的寻找，继续针对下一个方块寻找可合并的方块。
        * 然后就是针对每一列，将非0的元素，往上挨个的移动摆放。
        * 合并+移动后，再随机增加新方块，新方块随机设置成2,4等值。如果没有空位，则将loss置为1。
        * **对于按了esc键，启动游戏结束界面，打印对应信息，然后判断是不是到了最高分。**
    * 画图函数，扫描每一个数组元素，对应的在可视化界面上，显示对应的图片。
    * 刷新界面顶部的“得分”，“最高分”等信息。
    * 判断是不是游戏失败，loss标志是否置为1。
        * 如果游戏失败，显示图片game over，以及“用户名”，“本次得分”，“最高分”。
        * 调用函数判断是不是刷新了最高分记录，如果刷新了记录，保存进txt中。